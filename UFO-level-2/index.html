<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>UFO Finder</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/superhero/bootstrap.min.css">
  <link href="https://fonts.googleapis.com/css?family=Ubuntu" rel="stylesheet">
  <link rel="stylesheet" href="static/css/style.css">
  <script src="https://d3js.org/d3.v5.min.js"></script>
  <script language="javascript" type="text/javascript">
  function dynamicdropdown(listindex)
  {
    document.getElementById("sub-category").innerText = null
    switch (listindex)
    {
    case "":
      document.getElementById("sub-category").options[0]=new Option("");
      break;
    case "date" :   
      document.getElementById("sub-category").options[0]=new Option("Select a Date");
      let distinctDates = [...new Set(data.map(d => d.datetime))];
      for (i=0; i<distinctDates.length; i++){
        document.getElementById("sub-category").options[i+1]=new Option(distinctDates[i]);
      }
      break;
    case "city" :
      document.getElementById("sub-category").options[0]=new Option("Select a City","");
      let distinctCities = [...new Set(data.map(d => d.city))];
      for (i=0; i<distinctCities.length; i++){
        document.getElementById("sub-category").options[i+1]=new Option(distinctCities[i]);
      }
      break;
    case "state" :
      document.getElementById("sub-category").options[0]=new Option("Select a State","");
      let distinctStates = [...new Set(data.map(d => d.state))];
      for (i=0; i<distinctStates.length; i++){
        document.getElementById("sub-category").options[i+1]=new Option(distinctStates[i]);
      }
      break;
      case "country" :
      document.getElementById("sub-category").options[0]=new Option("Select a Country","");
      let distinctCountries = [...new Set(data.map(d => d.country))];
      for (i=0; i<distinctCountries.length; i++){
        document.getElementById("sub-category").options[i+1]=new Option(distinctCountries[i]);
      }
      break;
    case "shape" :
      document.getElementById("sub-category").options[0]=new Option("Select a Shape","");
      let distinctShapes = [...new Set(data.map(d => d.shape))];
      for (i=0; i<distinctShapes.length; i++){
        document.getElementById("sub-category").options[i+1]=new Option(distinctShapes[i]);
      }
      break;
    }
    return true;
  }
  </script>
</head>


<body>
  <div class="wrapper">
    <nav class="navbar navbar-default">
      <div class="container-fluid">
        <div class="navbar-header">
          <a class="navbar-brand" href="index.html">UFO Sightings
            <img class="nav-ufo" src="static/images/ufo.svg">
          </a>
        </div>
      </div>
    </nav>
    <div class="hero text-center">
      <h1>UFO Sightings</h1>
      <p>The Truth is Out There</p>
    </div>
    <div class="container">
      <div class="row margin-top-50">
        <div class="col-md-2">
          <div class="category_div" id="category_div">
            <h4>Filter By:</h4>
            <select id="main-category" name="main-category" onchange="javascript: dynamicdropdown(this.options[this.selectedIndex].value);">
            <option value="">Select Category</option>
            <option value="date">Date</option>
            <option value="city">City</option>
            <option value="state">State</option>
            <option value="country">Country</option>
            <option value="shape">Shape</option>
            </select>
          </div>
          <div class="sub_category_div" id="sub_category_div">
            <script type="text/javascript" language="JavaScript">
            document.write('<select name="sub-category" id="sub-category"><option value=""></option></select>')
            </script>
            <noscript>
            <select id="sub-category" name="sub-category"></select>
            </noscript>
          </div>
          <button id="filter-btn" type="button" class="btn btn-default">Filter Table</button>
        </div>  
        <div class="col-md-10">
          <div id="table-area" class="table">
            <table id="ufo-table" class="table table-striped">
              <thead>
                <tr>
                  <th class="table-head">Date</th>
                  <th class="table-head">City</th>
                  <th class="table-head">State</th>
                  <th class="table-head">Country</th>
                  <th class="table-head">Shape</th>
                  <th class="table-head">Duration</th>
                  <th class="table-head">Comments</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
    <footer class="footer">
      <span class="bottom">UFO Sightings</span>
    </footer>
  </div>
  <script src="static/js/data.js"></script>
  <script src="static/js/app.js"></script>
</body>

</html>
